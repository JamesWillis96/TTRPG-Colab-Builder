{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/jwillis8/Documents/TTRPG-Colab-Builder/app/sessions/create/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { useAuth } from '../../../contexts/AuthContext'\r\nimport { supabase } from '../../../lib/supabase'\r\nimport { useRouter } from 'next/navigation'\r\n\r\nexport default function CreateSessionPage() {\r\n  const { user } = useAuth()\r\n  const router = useRouter()\r\n  const [title, setTitle] = useState('')\r\n  const [description, setDescription] = useState('')\r\n  const [date, setDate] = useState('')\r\n  const [maxPlayers, setMaxPlayers] = useState(5)\r\n  const [loading, setLoading] = useState(false)\r\n  const [error, setError] = useState('')\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    \r\n    if (!user) {\r\n      router.push('/login')\r\n      return\r\n    }\r\n\r\n    setLoading(true)\r\n    setError('')\r\n\r\n    try {\r\n      const { error: insertError } = await supabase\r\n        .from('sessions')\r\n        .insert({\r\n          title,\r\n          description,\r\n          date_time: date,\r\n          max_players: maxPlayers,\r\n          gm_id: user.id,\r\n          status: 'open'\r\n        })\r\n\r\n      if (insertError) throw insertError\r\n\r\n      router.push('/sessions')\r\n    } catch (err:  any) {\r\n      setError(err.message)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  if (!user) {\r\n    return (\r\n      <div style={{ padding: '2rem', textAlign: 'center' }}>\r\n        <p>Please log in to create a session. </p>\r\n        <a href=\"/login\" style={{ color: '#4f8' }}>Go to Login</a>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <main style={{\r\n      maxWidth: '600px',\r\n      margin: '2rem auto',\r\n      padding: '2rem',\r\n      border: '1px solid #333',\r\n      borderRadius: '8px',\r\n      background: '#111'\r\n    }}>\r\n      <h1 style={{ fontSize: '2rem', marginBottom: '1.5rem' }}>Create New Session</h1>\r\n\r\n      <form onSubmit={handleSubmit}>\r\n        <div style={{ marginBottom: '1rem' }}>\r\n          <label style={{ display: 'block', marginBottom: '0.5rem', color: '#aaa' }}>\r\n            Session Title *\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            value={title}\r\n            onChange={(e) => setTitle(e.target.value)}\r\n            required\r\n            placeholder=\"e.g., Exploring the Dark Forest\"\r\n            style={{\r\n              width: '100%',\r\n              padding: '0.5rem',\r\n              background: '#222',\r\n              border: '1px solid #444',\r\n              borderRadius: '4px',\r\n              color: '#fff'\r\n            }}\r\n          />\r\n        </div>\r\n\r\n        <div style={{ marginBottom: '1rem' }}>\r\n          <label style={{ display: 'block', marginBottom: '0.5rem', color: '#aaa' }}>\r\n            Description\r\n          </label>\r\n          <textarea\r\n            value={description}\r\n            onChange={(e) => setDescription(e.target.value)}\r\n            placeholder=\"What's this session about?\"\r\n            rows={4}\r\n            style={{\r\n              width: '100%',\r\n              padding: '0.5rem',\r\n              background: '#222',\r\n              border: '1px solid #444',\r\n              borderRadius: '4px',\r\n              color: '#fff',\r\n              fontFamily: 'inherit',\r\n              resize: 'vertical'\r\n            }}\r\n          />\r\n        </div>\r\n\r\n        <div style={{ marginBottom: '1rem' }}>\r\n          <label style={{ display: 'block', marginBottom: '0.5rem', color: '#aaa' }}>\r\n            Date *\r\n          </label>\r\n          <input\r\n            type=\"date\"\r\n            value={date}\r\n            onChange={(e) => setDate(e.target.value)}\r\n            required\r\n            style={{\r\n              width: '100%',\r\n              padding: '0.5rem',\r\n              background: '#222',\r\n              border: '1px solid #444',\r\n              borderRadius: '4px',\r\n              color: '#fff'\r\n            }}\r\n          />\r\n        </div>\r\n\r\n        <div style={{ marginBottom:  '1.5rem' }}>\r\n          <label style={{ display:  'block', marginBottom: '0.5rem', color: '#aaa' }}>\r\n            Max Players *\r\n          </label>\r\n          <input\r\n            type=\"number\"\r\n            value={maxPlayers}\r\n            onChange={(e) => setMaxPlayers(parseInt(e.target.value))}\r\n            required\r\n            min={1}\r\n            max={10}\r\n            style={{\r\n              width: '100%',\r\n              padding: '0.5rem',\r\n              background: '#222',\r\n              border: '1px solid #444',\r\n              borderRadius: '4px',\r\n              color: '#fff'\r\n            }}\r\n          />\r\n        </div>\r\n\r\n        {error && (\r\n          <div style={{\r\n            padding:  '0.75rem',\r\n            marginBottom: '1rem',\r\n            background: '#ff000020',\r\n            border: '1px solid #ff0000',\r\n            borderRadius: '4px',\r\n            color: '#ff6666'\r\n          }}>\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        <div style={{ display:  'flex', gap: '1rem' }}>\r\n          <button\r\n            type=\"submit\"\r\n            disabled={loading}\r\n            style={{\r\n              flex: 1,\r\n              padding: '0.75rem',\r\n              background: loading ? '#444' : '#4f8',\r\n              color: loading ? '#888' : '#000',\r\n              border: 'none',\r\n              borderRadius: '4px',\r\n              fontSize: '1rem',\r\n              fontWeight: 'bold',\r\n              cursor: loading ? 'not-allowed' : 'pointer'\r\n            }}\r\n          >\r\n            {loading ? 'Creating.. .' : 'Create Session'}\r\n          </button>\r\n\r\n          <a\r\n            href=\"/sessions\"\r\n            style={{\r\n              flex: 1,\r\n              padding: '0.75rem',\r\n              background: '#333',\r\n              color: '#fff',\r\n              border: '1px solid #555',\r\n              borderRadius: '4px',\r\n              fontSize: '1rem',\r\n              fontWeight: 'bold',\r\n              textAlign: 'center',\r\n              textDecoration: 'none',\r\n              display: 'block'\r\n            }}\r\n          >\r\n            Cancel\r\n          </a>\r\n        </div>\r\n      </form>\r\n    </main>\r\n  )\r\n}"],"names":[],"mappings":"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"}}]
}