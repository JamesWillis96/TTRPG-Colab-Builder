{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/jwillis8/Documents/TTRPG-Colab-Builder/app/profile/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { supabase } from '../../lib/supabase'\r\n\r\nexport default function ProfilePage() {\r\n  const { user } = useAuth()\r\n  const [username, setUsername] = useState('')\r\n  const [role, setRole] = useState('player')\r\n  const [loading, setLoading] = useState(true)\r\n  const [saving, setSaving] = useState(false)\r\n  const [message, setMessage] = useState('')\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      loadProfile()\r\n    }\r\n  }, [user])\r\n\r\n  const loadProfile = async () => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('profiles')\r\n        .select('*')\r\n        .eq('id', user!.id)\r\n        .single()\r\n\r\n      if (error) throw error\r\n\r\n      setUsername(data.username)\r\n      setRole(data.role)\r\n    } catch (error: any) {\r\n      console.error('Error loading profile:', error.message)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const handleSave = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    setSaving(true)\r\n    setMessage('')\r\n\r\n    try {\r\n      const { error } = await supabase\r\n        .from('profiles')\r\n        .update({ username, role })\r\n        .eq('id', user!.id)\r\n\r\n      if (error) throw error\r\n\r\n      setMessage('Profile updated successfully!')\r\n    } catch (error:  any) {\r\n      setMessage('Error:  ' + error.message)\r\n    } finally {\r\n      setSaving(false)\r\n    }\r\n  }\r\n\r\n  if (!user) {\r\n    return <div style={{ padding:  '2rem' }}>Please log in to view your profile.</div>\r\n  }\r\n\r\n  if (loading) {\r\n    return <div style={{ padding: '2rem' }}>Loading...</div>\r\n  }\r\n\r\n  return (\r\n    <main style={{ \r\n      maxWidth: '600px', \r\n      margin: '2rem auto', \r\n      padding:  '2rem',\r\n      border: '1px solid #333',\r\n      borderRadius: '8px',\r\n      background: '#111'\r\n    }}>\r\n      <h1 style={{ fontSize: '2rem', marginBottom: '1. 5rem' }}>Your Profile</h1>\r\n\r\n      <div style={{ \r\n        marginBottom: '2rem', \r\n        padding: '1rem', \r\n        background: '#0a0a0a', \r\n        borderRadius: '4px',\r\n        border: '1px solid #222'\r\n      }}>\r\n        <p style={{ marginBottom: '0.5rem', color: '#888' }}>\r\n          <strong>Email:</strong> {user.email}\r\n        </p>\r\n        <p style={{ color: '#888' }}>\r\n          <strong>User ID:</strong> {user.id. substring(0, 8)}...\r\n        </p>\r\n      </div>\r\n\r\n      <form onSubmit={handleSave}>\r\n        <div style={{ marginBottom: '1rem' }}>\r\n          <label style={{ display: 'block', marginBottom: '0.5rem', color: '#aaa' }}>\r\n            Username\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            value={username}\r\n            onChange={(e) => setUsername(e.target.value)}\r\n            required\r\n            style={{\r\n              width: '100%',\r\n              padding: '0.5rem',\r\n              background: '#222',\r\n              border: '1px solid #444',\r\n              borderRadius: '4px',\r\n              color: '#fff'\r\n            }}\r\n          />\r\n        </div>\r\n\r\n        <div style={{ marginBottom:  '1.5rem' }}>\r\n          <label style={{ display: 'block', marginBottom: '0.5rem', color: '#aaa' }}>\r\n            Role\r\n          </label>\r\n          <select\r\n            value={role}\r\n            onChange={(e) => setRole(e.target.value)}\r\n            style={{\r\n              width: '100%',\r\n              padding: '0.5rem',\r\n              background: '#222',\r\n              border: '1px solid #444',\r\n              borderRadius: '4px',\r\n              color: '#fff'\r\n            }}\r\n          >\r\n            <option value=\"player\">Player</option>\r\n            <option value=\"gm\">Game Master</option>\r\n            <option value=\"admin\">Admin</option>\r\n          </select>\r\n        </div>\r\n\r\n        {message && (\r\n          <div style={{ \r\n            padding: '0.75rem', \r\n            marginBottom: '1rem',\r\n            background: message.startsWith('Error') ? '#ff000020' : '#00ff0020',\r\n            border: message.startsWith('Error') ? '1px solid #ff0000' : '1px solid #00ff00',\r\n            borderRadius: '4px',\r\n            color: message.startsWith('Error') ? '#ff6666' : '#4f8'\r\n          }}>\r\n            {message}\r\n          </div>\r\n        )}\r\n\r\n        <button\r\n          type=\"submit\"\r\n          disabled={saving}\r\n          style={{\r\n            width: '100%',\r\n            padding: '0.75rem',\r\n            background: saving ? '#444' : '#4f8',\r\n            color: saving ? '#888' : '#000',\r\n            border: 'none',\r\n            borderRadius: '4px',\r\n            fontSize: '1rem',\r\n            fontWeight: 'bold',\r\n            cursor: saving ? 'not-allowed' : 'pointer'\r\n          }}\r\n        >\r\n          {saving ? 'Saving...' : 'Save Changes'}\r\n        </button>\r\n      </form>\r\n    </main>\r\n  )\r\n}"],"names":[],"mappings":"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"}}]
}